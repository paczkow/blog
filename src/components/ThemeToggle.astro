---
import { Icon } from "astro-icon/components";
---

<button
  id="theme-toggle"
  class="not-disabled:text-sand-11 hover:not-disabled:text-sand-12 items-center justify-center rounded-md bg-transparent py-2 text-gray-900 transition-all duration-300 ease-in-out not-disabled:cursor-pointer disabled:opacity-15 relative"
  type="button"
  aria-label="Toggle dark mode"
  aria-pressed="false"
>
  <Icon name="sun" class="h-5 w-5 block dark:hidden sun-icon" />
  <Icon name="moon" class="h-5 w-5 hidden dark:block moon-icon" />
  <span class="sr-only">Toggle dark mode</span>
</button>

<script>
  function initializeTheme() {
    const toggle = document.getElementById('theme-toggle');
    if (!toggle) return;

    toggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.contains('dark');
      const newTheme = isDark ? 'light' : 'dark';

      localStorage.theme = newTheme;
      document.documentElement.classList.toggle('dark', newTheme === 'dark');
      toggle.setAttribute('aria-pressed', (newTheme === 'dark').toString());
    });
  }

  document.addEventListener('DOMContentLoaded', initializeTheme);
  document.addEventListener('astro:page-load', initializeTheme);
</script> 